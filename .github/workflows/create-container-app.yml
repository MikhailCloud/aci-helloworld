name: Docker Image CI

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4
    - name: get access token
      run: | 
        curl -i --data-urlencode "grant_type=client_credentials" \
        --data-urlencode ${{ secrets.EVOAR_KEYID }} \
        --data-urlencode ${{ secrets.EVOAR_KEYSECRET }} "https://auth.iam.sbercloud.ru/auth/system/openid/token"
      env:
        username: ${{ secrets.EVOAR_KEYID }}
        password: ${{ secrets.EVOAR_KEYSECRET }}
  
